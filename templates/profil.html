{% extends 'base.html' %}

{% block title %}Profilim - Artvizyon Haber{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        
        <div class="col-md-4 mb-4">
            <div class="card shadow border-0">
                <div class="card-body text-center" style="background-color: #fdf5e6;">
                    <div class="mb-3">
                        {% if user.profil.resim %}
                            <img src="{{ user.profil.resim.url }}" class="rounded-circle img-thumbnail" style="width: 150px; height: 150px; object-fit: cover; border: 4px solid #2E4A38;">
                        {% else %}
                            <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto text-white fw-bold display-4 shadow-sm" 
                                 style="width: 150px; height: 150px; background-color: #2E4A38; border: 4px solid #D4AF37;">
                                {{ user.username|first|upper }}
                            </div>
                        {% endif %}
                    </div>
                    <h4 class="fw-bold" style="color: #3E2723;">{{ user.first_name }} {{ user.last_name }}</h4>
                    <p class="text-muted">@{{ user.username }}</p>
                    
                    {% if user.profil.biyografi %}
                        <p class="small text-secondary fst-italic">"{{ user.profil.biyografi }}"</p>
                    {% else %}
                        <p class="small text-muted">Henüz biyografi eklenmemiş.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="card shadow border-0">
                <div class="card-header text-white py-3" style="background-color: #3E2723; border-bottom: 4px solid #2E4A38;">
                    <h5 class="mb-0 fw-bold"><i class="fas fa-cog me-2"></i> Profil Bilgilerini Düzenle</h5>
                </div>
                <div class="card-body p-4">
                    
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <h6 class="text-success fw-bold border-bottom pb-2 mb-3">Hesap Bilgileri</h6>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-bold small text-muted">Kullanıcı Adı</label>
                                {{ u_form.username }} 
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold small text-muted">E-posta</label>
                                {{ u_form.email }}
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold small text-muted">Ad</label>
                                {{ u_form.first_name }}
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold small text-muted">Soyad</label>
                                {{ u_form.last_name }}
                            </div>
                        </div>

                        <h6 class="text-success fw-bold border-bottom pb-2 mb-3">Profil Detayları</h6>
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold small text-muted">Profil Fotoğrafı</label>
                            {{ p_form.resim }}
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold small text-muted">Hakkımda (Biyografi)</label>
                            {{ p_form.biyografi }}
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold small text-muted">Telefon Numarası</label>
                            {{ p_form.telefon }}
                        </div>

                        <div class="d-grid mt-4">
                            <button type="submit" class="btn btn-warning fw-bold py-2 shadow-sm text-dark">
                                <i class="fas fa-save me-2"></i> DEĞİŞİKLİKLERİ KAYDET
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>

    </div>
</div>

<style>
    /* Django form elemanlarına otomatik stil verelim */
    input[type="text"], input[type="email"], textarea, input[type="file"] {
        width: 100%;
        padding: 0.6rem;
        border: 1px solid #ced4da;
        border-radius: 6px;
        background-color: #f9f9f9;
        transition: 0.3s;
    }
    input:focus, textarea:focus {
        border-color: #2E4A38;
        background-color: #fff;
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba(46, 74, 56, 0.15);
    }
    label { margin-bottom: 5px; }
</style>
{% endblock %}